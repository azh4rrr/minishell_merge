# üêö Minishell - Unix Shell Implementation

<div align="center">

![Minishell Banner](https://via.placeholder.com/800x200/0D1117/00D4AA?text=MINISHELL+-+UNIX+SHELL+RECREATION)

[![Made with C](https://img.shields.io/badge/Made%20with-C-blue?style=for-the-badge&logo=c)](https://en.wikipedia.org/wiki/C_(programming_language))
[![42 School](https://img.shields.io/badge/42-School-000000?style=for-the-badge&logo=42)](https://42.fr/)
[![Shell](https://img.shields.io/badge/Shell-Implementation-success?style=for-the-badge)](https://github.com/__azh4rrr__/minishell)
[![Partner](https://img.shields.io/badge/Partner-mouchtach-orange?style=for-the-badge&logo=github)](https://github.com/mouchtach)

*A fully functional Unix shell with advanced parsing and execution capabilities*

[Features](#-features) ‚Ä¢ [Installation](#-installation) ‚Ä¢ [Usage](#-usage) ‚Ä¢ [Built-ins](#-built-in-commands) ‚Ä¢ [Architecture](#-architecture)

</div>

---

## üéØ About

**Minishell** is a comprehensive Unix shell implementation project from 42 School that recreates the core functionality of bash. This project demonstrates deep understanding of system programming, process management, signal handling, and command-line parsing in a Unix environment.

Built as a collaborative effort, this shell handles complex command parsing, pipe chains, redirections, environment variable expansion, and provides a complete interactive command-line experience.

## ‚ú® Features

- üñ•Ô∏è **Interactive Shell** - Full command-line interface with prompt and history
- üîó **Pipe Chains** - Support for complex command piping (`cmd1 | cmd2 | cmd3`)
- üìÅ **I/O Redirections** - Input, output, and append redirections (`<`, `>`, `>>`)
- üåç **Environment Variables** - Complete variable expansion and management (`$VAR`)
- üî§ **Quote Handling** - Proper parsing of single and double quotes
- ‚ö° **Signal Management** - Graceful handling of Ctrl+C, Ctrl+D, and Ctrl+\
- üèóÔ∏è **Built-in Commands** - Essential shell built-ins implementation
- üß† **Advanced Parsing** - Robust tokenization and command parsing
- üõ°Ô∏è **Error Handling** - Comprehensive error management and reporting
- üéØ **42 Compliant** - Meets all project requirements and norms

## üöÄ Installation

### Prerequisites
- **OS**: Unix-like system (Linux, macOS, WSL)
- **Compiler**: GCC or Clang with C99 support
- **Libraries**: GNU Readline library
- **Make**: GNU Make

### Quick Start

```bash
# Clone the repository
git clone https://github.com/__azh4rrr__/minishell.git
cd minishell

# Install dependencies (Ubuntu/Debian)
sudo apt-get install libreadline-dev

# Install dependencies (macOS with Homebrew)
brew install readline

# Compile the project
make

# Clean object files
make clean

# Remove all generated files
make fclean

# Recompile everything
make re
```

## üí° Usage

### Basic Usage

```bash
# Start the shell
./minishell

# Basic commands
minishell$ ls -la
minishell$ pwd
minishell$ echo "Hello, World!"

# Exit the shell
minishell$ exit
```

### Advanced Examples

```bash
# Pipe chains
minishell$ ls -la | grep ".c" | wc -l
minishell$ cat file.txt | sort | uniq -c | sort -nr

# Redirections
minishell$ echo "Hello" > output.txt
minishell$ sort < input.txt > sorted.txt
minishell$ ls -la >> log.txt

# Environment variables
minishell$ export MY_VAR="Hello World"
minishell$ echo "Message: $MY_VAR"
minishell$ echo "Path: $PATH"

# Quote handling
minishell$ echo 'Single quotes: $USER'
minishell$ echo "Double quotes: $USER"
minishell$ echo "Mixed 'quotes' and $HOME"
```

## üõ†Ô∏è Built-in Commands

### Complete Built-in Implementation

| Command | Description | Usage | Exit Status |
|---------|-------------|-------|-------------|
| `echo` | Display text with optional newline suppression | `echo [-n] [text...]` | 0 |
| `cd` | Change current directory | `cd [directory]` | 0/1 |
| `pwd` | Print current working directory | `pwd` | 0 |
| `export` | Set or display environment variables | `export [VAR[=value]]` | 0 |
| `unset` | Remove environment variables | `unset [VAR...]` | 0 |
| `env` | Display environment variables | `env` | 0 |
| `exit` | Exit shell with optional status | `exit [status]` | varies |

### Built-in Examples

```bash
# Echo with options
minishell$ echo -n "No newline"
minishell$ echo "Normal echo"

# Directory navigation
minishell$ cd /home/user
minishell$ cd ..
minishell$ cd    # Go to HOME
minishell$ pwd

# Environment management
minishell$ export DEBUG=1
minishell$ export PATH="$PATH:/custom/bin"
minishell$ unset DEBUG
minishell$ env | grep PATH

# Exit with status
minishell$ exit 42
```

## üèóÔ∏è Architecture

### Project Structure

```
minishell/
‚îú‚îÄ‚îÄ minishell.c               # Main entry point
‚îú‚îÄ‚îÄ minishell.h               # Main header file
‚îú‚îÄ‚îÄ Makefile                  # Build configuration
‚îú‚îÄ‚îÄ execution/
‚îÇ   ‚îú‚îÄ‚îÄ builtin/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ built_in.c        # Built-in dispatcher
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cd.c              # Change directory
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ echo.c            # Echo command
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ exit.c            # Exit command
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export.c          # Export variables
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ export_utils.c    # Export utilities
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ unset.c           # Unset variables
‚îÇ   ‚îú‚îÄ‚îÄ environment.c         # Environment management
‚îÇ   ‚îú‚îÄ‚îÄ environment_utils.c   # Environment utilities
‚îÇ   ‚îú‚îÄ‚îÄ error.c               # Error handling
‚îÇ   ‚îú‚îÄ‚îÄ execution.c           # Main execution engine
‚îÇ   ‚îú‚îÄ‚îÄ exit_status.c         # Exit status management
‚îÇ   ‚îú‚îÄ‚îÄ fork.c                # Process forking
‚îÇ   ‚îú‚îÄ‚îÄ get_next_line.c       # Line reading utility
‚îÇ   ‚îú‚îÄ‚îÄ get_path.c            # PATH resolution
‚îÇ   ‚îú‚îÄ‚îÄ heredoc.c             # Here document handling
‚îÇ   ‚îú‚îÄ‚îÄ leaks_fd.c            # File descriptor leak management
‚îÇ   ‚îú‚îÄ‚îÄ leaks_mem.c           # Memory leak management
‚îÇ   ‚îú‚îÄ‚îÄ list_utils.c          # Linked list utilities
‚îÇ   ‚îú‚îÄ‚îÄ redirections.c        # I/O redirections
‚îÇ   ‚îú‚îÄ‚îÄ signals.c             # Signal handling
‚îÇ   ‚îî‚îÄ‚îÄ utils_std.c           # Standard utilities
‚îú‚îÄ‚îÄ parsing/
‚îÇ   ‚îú‚îÄ‚îÄ expansion/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ expansion.c       # Variable expansion
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ expansion_utils.c # Expansion utilities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ expansion_utils_b.c
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ expansion_utils_c.c
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pre_expand.c      # Pre-expansion processing
‚îÇ   ‚îú‚îÄ‚îÄ redirecting/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parse_redir.c     # Redirection parsing
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parse_redir_utils.c
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ parse_redir_utils_b.c
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ redirection.c     # Redirection handling
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils_a.c         # Parsing utilities A
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils_b.c         # Parsing utilities B
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils_c.c         # Parsing utilities C
‚îÇ   ‚îú‚îÄ‚îÄ cleanup.c             # Memory cleanup
‚îÇ   ‚îú‚îÄ‚îÄ init_structs.c        # Structure initialization
‚îÇ   ‚îú‚îÄ‚îÄ parsing.c             # Main parsing logic
‚îÇ   ‚îú‚îÄ‚îÄ special_split.c       # Advanced string splitting
‚îÇ   ‚îî‚îÄ‚îÄ syntax_handle.c       # Syntax validation
‚îú‚îÄ‚îÄ H_EXP/
‚îÇ   ‚îú‚îÄ‚îÄ h_exp.c               # Heredoc expansion
‚îÇ   ‚îî‚îÄ‚îÄ h_exp_utils.c         # Heredoc utilities
‚îî‚îÄ‚îÄ libft/
    ‚îú‚îÄ‚îÄ libft.h               # Library header
    ‚îú‚îÄ‚îÄ Makefile              # Library build file
    ‚îî‚îÄ‚îÄ [42 library functions] # Custom C library
```

### Core Components

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            MINISHELL PIPELINE          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 1. INPUT ‚Üí Main loop (minishell.c)     ‚îÇ
‚îÇ 2. PARSING ‚Üí Tokenization & validation ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ Special split & syntax check    ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ Variable expansion (H_EXP)      ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ Redirection parsing             ‚îÇ
‚îÇ 3. EXECUTION ‚Üí Process management      ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ Built-in commands               ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ External command execution      ‚îÇ
‚îÇ    ‚îú‚îÄ‚îÄ Signal handling                 ‚îÇ
‚îÇ    ‚îî‚îÄ‚îÄ I/O redirections                ‚îÇ
‚îÇ 4. CLEANUP ‚Üí Memory & FD management    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß Features in Detail

### Command Parsing Pipeline

1. **Lexical Analysis** - Tokenizes input into meaningful units
2. **Syntax Analysis** - Validates command syntax and structure
3. **Expansion** - Handles variable expansion and quote removal
4. **Execution Planning** - Builds execution tree for complex commands

### Pipe Implementation

```bash
# Simple pipe
minishell$ ls | wc -l

# Complex pipe chain
minishell$ cat file.txt | grep "pattern" | sort | uniq | wc -l

# Pipes with redirections
minishell$ ls -la | grep "\.c$" > c_files.txt
```

### Redirection Handling

```bash
# Input redirection
minishell$ sort < unsorted.txt

# Output redirection (overwrite)
minishell$ echo "Hello" > output.txt

# Output redirection (append)
minishell$ echo "World" >> output.txt

# Multiple redirections
minishell$ cat < input.txt > output.txt
```

### Environment Variables

```bash
# Setting variables
minishell$ export NAME="John Doe"
minishell$ export PATH="$PATH:/new/path"

# Using variables
minishell$ echo "Hello, $NAME"
minishell$ echo "Current user: $USER"
minishell$ ls $HOME

# Special variables
minishell$ echo "Exit status: $?"
minishell$ echo "Process ID: $$"
```

### Quote Handling

```bash
# Single quotes (literal)
minishell$ echo 'Value of $HOME: $HOME'

# Double quotes (with expansion)
minishell$ echo "Value of $HOME: $HOME"

# Mixed quotes
minishell$ echo "User's home: '$HOME'"
```

## üß™ Testing

### Manual Testing

```bash
# Basic functionality
./minishell
minishell$ echo "Test successful"
minishell$ pwd
minishell$ ls | head -5

# Error handling
minishell$ /nonexistent/command
minishell$ export 123INVALID=value
minishell$ cd /nonexistent/directory

# Signal handling
# Press Ctrl+C, Ctrl+D, Ctrl+\ and observe behavior
```

### Automated Testing

```bash
# Create test script
cat > test_minishell.sh << 'EOF'
#!/bin/bash
echo "=== Testing Basic Commands ==="
echo "pwd" | ./minishell
echo "echo 'Hello World'" | ./minishell

echo "=== Testing Pipes ==="
echo "ls | wc -l" | ./minishell

echo "=== Testing Redirections ==="
echo "echo 'test' > /tmp/minishell_test" | ./minishell
echo "cat < /tmp/minishell_test" | ./minishell
rm -f /tmp/minishell_test

echo "=== Testing Environment ==="
echo "export TEST_VAR=hello && echo \$TEST_VAR" | ./minishell
EOF

chmod +x test_minishell.sh
./test_minishell.sh
```

### Comparison with Bash

```bash
# Test identical behavior
command="echo 'Hello' | wc -c"

echo "Bash output:"
echo "$command" | bash

echo "Minishell output:"
echo "$command" | ./minishell
```

## üìä Performance & Compliance

### 42 School Requirements

#### Mandatory Part
- ‚úÖ Display prompt and wait for commands
- ‚úÖ Execute external commands via PATH or relative/absolute paths
- ‚úÖ Implement all required built-in commands
- ‚úÖ Handle pipes (`|`) correctly
- ‚úÖ Handle redirections (`<`, `>`, `>>`) correctly
- ‚úÖ Handle environment variables (`$VAR`) correctly
- ‚úÖ Handle single and double quotes correctly
- ‚úÖ Implement signal handling (Ctrl+C, Ctrl+D, Ctrl+\)
- ‚úÖ No memory leaks or crashes

#### Error Handling
- ‚úÖ Command not found
- ‚úÖ Permission denied
- ‚úÖ Syntax errors
- ‚úÖ File/directory not found
- ‚úÖ Invalid redirections
- ‚úÖ Broken pipes

### Memory Management

```c
// Example of proper resource management
typedef struct s_shell {
    char **env;
    char *line;
    t_token *tokens;
    t_cmd *commands;
} t_shell;

// Cleanup function called on exit
void cleanup_shell(t_shell *shell);
```

## üéì Learning Outcomes

This project demonstrates mastery of:

- **System Programming** - Process creation, management, and communication
- **Unix APIs** - File descriptors, pipes, signals, environment
- **Memory Management** - Dynamic allocation, leak prevention, cleanup
- **Parsing Techniques** - Lexical analysis, syntax parsing, AST building
- **Error Handling** - Robust error detection and recovery
- **Shell Internals** - Understanding how shells work internally
- **Collaboration** - Working effectively in pairs on complex projects

## üë• Team

<div align="center">

### Project Partners

| Developer | GitHub | Contributions |
|-----------|---------|---------------|
| **__azh4rrr__** | [@__azh4rrr__](https://github.com/__azh4rrr__) | Parsing, Memory Management, Testing |
| **mouchtach** | [@mouchtach](https://github.com/mouchtach) | Signals, Execution, Built-ins |

*Built through collaborative pair programming and code reviews*

</div>

## üèÜ 42 School Evaluation

### Evaluation Criteria
- **Functionality** - All required features work correctly
- **Error Management** - Proper handling of all error cases  
- **Code Quality** - Clean, readable, and well-structured code
- **Memory Management** - No leaks, proper cleanup
- **Compliance** - Follows 42 coding standards (Norminette)

### Expected Grade Distribution
- **Mandatory Part**: 80/100 (All requirements met)
- **Code Quality**: +10 (Clean implementation)
- **Error Handling**: +5 (Comprehensive error management)
- **Bonus Features**: +5 (Additional shell features)

## üîß Build System

```makefile
# Compilation flags
CFLAGS = -Wall -Wextra -Werror -std=c99
LIBS = -lreadline

# Build targets
all: minishell
clean: # Remove object files
fclean: # Remove all generated files
re: # Rebuild everything
```

## üêõ Known Limitations

- No job control (background processes with `&`)
- Limited wildcard expansion (globbing)
- No command substitution (`$(command)` or `` `command` ``)
- No arithmetic expansion (`$((expression))`)
- No brace expansion (`{a,b,c}`)
- No alias support
- Limited here-document support (`<<`)

---

<div align="center">

**üêö Unix shell mastery through collaborative development! üêö**

*"The shell is the gateway to the system - make it robust, make it reliable."*

Made with üß† and systematic thinking by **[__azh4rrr__](https://github.com/__azh4rrr__)** & **[mouchtach](https://github.com/mouchtach)**

</div>